{# templates/user/_form.html.twig #}
{{ form_start(form, {'attr': {'class': 'space-y-10'}}) }}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-10">
        
        {# COLUMNA IZQUIERDA: Datos Personales #}
        <div class="space-y-8">
            <div class="flex items-center gap-3 mb-2">
                <div class="w-8 h-8 rounded-lg bg-[#8B5E3C]/10 flex items-center justify-center text-[#8B5E3C]">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                </div>
                <h3 class="text-stone-800 font-bold text-sm tracking-tight">Identidad y Perfil</h3>
            </div>

            <div class="flex flex-col gap-2">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#8B5E3C]">Nombre Completo</label>
                {{ form_widget(form.nombre, {'attr': {'class': 'w-full px-6 py-4 bg-stone-50 border-none rounded-2xl focus:ring-2 focus:ring-[#4A90A4] transition-all'}}) }}
            </div>

            <div class="flex flex-col gap-2">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#8B5E3C]">NIF / DNI</label>
                {{ form_widget(form.nif, {'attr': {'class': 'w-full px-6 py-4 bg-stone-50 border-none rounded-2xl focus:ring-2 focus:ring-[#4A90A4] transition-all font-mono'}}) }}
            </div>

            <div class="flex flex-col gap-2">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#8B5E3C]">Teléfono</label>
                {{ form_widget(form.telefono, {'attr': {'class': 'w-full px-6 py-4 bg-stone-50 border-none rounded-2xl focus:ring-2 focus:ring-[#4A90A4] transition-all'}}) }}
            </div>
        </div>

        {# COLUMNA DERECHA: Seguridad y Empleo #}
        <div class="space-y-8">
            <div class="flex items-center gap-3 mb-2">
                <div class="w-8 h-8 rounded-lg bg-[#4A90A4]/10 flex items-center justify-center text-[#4A90A4]">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                </div>
                <h3 class="text-stone-800 font-bold text-sm tracking-tight">Acceso y Contrato</h3>
            </div>

            <div class="flex flex-col gap-2">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#4A90A4]">Correo Electrónico</label>
                {{ form_widget(form.email, {'attr': {'class': 'w-full px-6 py-4 bg-stone-50 border-none rounded-2xl focus:ring-2 focus:ring-[#4A90A4] transition-all'}}) }}
            </div>

            <div class="flex flex-col gap-2">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-[#4A90A4]">Contraseña</label>
                {{ form_widget(form.password, {'attr': {'class': 'w-full px-6 py-4 bg-stone-50 border-none rounded-2xl focus:ring-2 focus:ring-[#4A90A4] transition-all', 'placeholder': '••••••••'}}) }}
            </div>

            {# CAMPO CONDICIONAL DE SEGURIDAD SOCIAL (Solo si es Employee) #}
            {% if form.social_security is defined %}
                <div class="flex flex-col gap-2 p-4 bg-blue-50/50 rounded-2xl border border-blue-100/50">
                    <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-blue-600">Nº Seguridad Social</label>
                    {{ form_widget(form.social_security, {'attr': {'class': 'w-full px-6 py-4 bg-white border-none rounded-xl focus:ring-2 focus:ring-blue-400 transition-all font-mono'}}) }}
                </div>
            {% endif %}
        </div>
    </div>

    {# SECCIÓN INFERIOR #}
    <div class="pt-8 flex flex-col md:flex-row items-center justify-between gap-8 border-t border-stone-100">
        <div class="flex items-center gap-4 bg-stone-50 px-6 py-4 rounded-2xl border border-stone-100 group cursor-pointer hover:bg-stone-100 transition-colors">
             {{ form_widget(form.contratoFirmado, {'attr': {'class': 'w-6 h-6 text-[#8B5E3C] focus:ring-[#8B5E3C] border-stone-300 rounded-lg cursor-pointer'}}) }}
             <div class="flex flex-col">
                 <label class="text-[10px] font-black uppercase tracking-widest text-stone-600 cursor-pointer">Estado Legal</label>
                 <span class="text-xs text-stone-400">Contrato firmado y verificado</span>
             </div>
        </div>

        <button class="w-full md:w-auto px-12 py-5 bg-[#3E2F28] hover:bg-[#8B5E3C] text-white font-bold rounded-2xl shadow-xl shadow-stone-200 transition-all transform hover:-translate-y-1 active:scale-95 flex items-center justify-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
            {{ button_label|default('Guardar Cambios') }}
        </button>
    </div>

    {# form_rest pintará los campos ocultos de forma segura #}
    <div class="hidden">
        {{ form_rest(form) }}
    </div>

{{ form_end(form) }}