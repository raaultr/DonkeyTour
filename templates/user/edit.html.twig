{# templates/user/edit.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Editar Usuario — {{ user.nombre }}{% endblock %}

{% block body %}
<div class="bg-[#FCFAF7] min-h-screen pt-4 px-8 pb-12">
    <div class="w-full max-w-5xl mx-auto">
        
        {# --- CABECERA --- #}
        <div class="flex items-center justify-between mb-10">
            <div class="flex flex-col gap-1">
                <h1 class="text-4xl font-extrabold text-[#3E2F28] tracking-tight">
                    Editar Perfil de <span class="text-[#8B5E3C]">{{ user.nombre }}</span>
                </h1>
            </div>
            
            {# --- LÓGICA DE RETORNO INTELIGENTE --- #}
            {% set back_path = 'ROLE_EMPLOYEE' in user.roles ? path('app_user_employees') : path('app_user_clients') %}
            
            <a href="{{ back_path }}" class="group flex items-center gap-3 px-6 py-3 bg-white border border-stone-200 text-stone-500 text-[11px] font-bold uppercase tracking-widest rounded-2xl hover:border-stone-400 hover:text-[#3E2F28] transition-all shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover:-translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Volver a la lista
            </a>
        </div>

        {# --- CONTENEDOR PRINCIPAL --- #}
        <div class="relative">
            {# Decoración sutil de fondo #}
            <div class="absolute -top-6 -left-6 w-24 h-24 bg-[#4A90A4] opacity-[0.05] rounded-full blur-2xl"></div>
            
            <div class="bg-white rounded-[3rem] border border-stone-100 shadow-2xl shadow-stone-200/40 p-12 relative overflow-hidden z-10">
                {# Marca de agua de diseño #}
                <div class="absolute top-0 right-0 w-48 h-48 bg-stone-50 rounded-bl-[5rem] -z-10 transition-transform hover:scale-105"></div>
                <div class="absolute top-10 right-10 text-stone-100 pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>

                {# --- FORMULARIO --- #}
                <div class="max-w-4xl">
                    {{ include('user/_form.html.twig', {'button_label': 'Actualizar Información'}) }}
                </div>

                {# --- SECCIÓN PELIGROSA --- #}
                <div class="mt-16 pt-8 border-t border-stone-50 flex items-center justify-between">
                    <div class="flex flex-col gap-1">
                        <h3 class="text-sm font-bold text-stone-600 uppercase tracking-tight">Acciones Críticas</h3>
                        <p class="text-xs text-stone-400 italic">Si eliminas este usuario, se borrarán todos sus datos y reservas asociadas.</p>
                    </div>
                    
                    <div class="transform transition-transform hover:scale-105">
                        {{ include('user/_delete_form.html.twig') }}
                    </div>
                </div>
            </div>
            
            <div class="absolute -bottom-4 -right-4 w-32 h-32 bg-[#8B5E3C] opacity-[0.03] rounded-full blur-3xl"></div>
        </div>

        <p class="text-center mt-8 text-stone-300 text-[10px] font-bold uppercase tracking-[0.4em]">
            Sistema de Gestión DonkeyTour
        </p>
    </div>
</div>
{% endblock %}
