{% extends 'base.html.twig' %}

{% block title %}Inicio â€” DonkeyTour{% endblock %}
{% block page_title %}Panel de Inicio{% endblock %}

{# ======================================================= #}
{# VISTA DEL ADMINISTRADOR (Sin cambios)                    #}
{# ======================================================= #}
{% block body %}
    {% if is_granted('ROLE_ADMIN') %}
        <div class="animate-fade-in-down">
            <div class="relative rounded-4xl p-8 md:p-12 text-white shadow-xl shadow-stone-900/30 overflow-hidden mb-8 group h-80" style="background-image: url('{{ asset('img/burroBanner.png') }}'); background-size: cover; background-position: center 30%;">
                <div class="absolute inset-0 bg-stone-900/40 transition-opacity duration-500 group-hover:bg-stone-900/30"></div>
                <div class="relative z-10 flex flex-col items-start gap-4">
                    <span class="inline-block px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-xs font-bold uppercase tracking-widest border border-white/30">Vista General</span>
                    <h1 class="text-3xl md:text-5xl font-serif font-extrabold tracking-tight leading-tight drop-shadow-sm">Â¡Bienvenido de nuevo, {{ app.user.nombre|default('Administrador') }}! ğŸ‘‹</h1>
                    <p class="text-white font-medium text-lg max-w-xl drop-shadow-sm leading-relaxed">Gestiona las reservas y supervisa el estado de nuestros burros.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white/80 backdrop-blur-xl border border-stone-100 rounded-4xl p-6 shadow-[0_10px_30px_rgba(139,94,60,0.05)]">
                    <h3 class="text-stone-400 text-xs font-bold uppercase tracking-widest mb-1">Servicios Activos</h3>
                    <p class="text-3xl font-serif font-extrabold text-[#3E2F28]">{{ services|length }}</p>
                </div>
                <div class="bg-white/80 backdrop-blur-xl border border-stone-100 rounded-4xl p-6 shadow-[0_10px_30px_rgba(139,94,60,0.05)]">
                    <h3 class="text-stone-400 text-xs font-bold uppercase tracking-widest mb-1">Burros Disponibles</h3>
                    <p class="text-3xl font-serif font-extrabold text-[#3E2F28]">{{ donkeys|length }}</p>
                </div>
                <div class="bg-white/80 backdrop-blur-xl border border-stone-100 rounded-4xl p-6 shadow-[0_10px_30px_rgba(139,94,60,0.05)]">
                    <h3 class="text-stone-400 text-xs font-bold uppercase tracking-widest mb-1">Rutas Disponibles</h3>
                    <p class="text-3xl font-serif font-extrabold text-[#3E2F28]">{{ services|filter(s => s.type == 'tour')|length }}</p>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{# ======================================================= #}
{# VISTA DEL CLIENTE (Landing Page - ACTUALIZADA)           #}
{# ======================================================= #}
{% block client_body %}
    {% if not is_granted('ROLE_ADMIN') %}
        <div class="bg-[#FCFAF7]">

            {# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               HERO - Ajustado para que no corte cabezas
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
            <div class="relative h-[85vh] w-full flex items-center justify-center text-center text-white overflow-hidden">
                <div class="absolute inset-0 bg-black/45 z-10"></div>
                {# He cambiado object-cover a object-top para que la foto no se corte por arriba #}
                <img src="{{ asset('img/burroBanner.png') }}" alt="DonkeyTour Granada"
                     class="absolute inset-0 w-full h-full object-cover object-top">

                <div class="relative z-20 px-6 max-w-4xl">
                    <span class="bg-white/20 backdrop-blur-md text-white px-5 py-1.5 text-xs font-bold uppercase tracking-widest rounded-full border border-white/25 inline-block mb-8">Granada, AndalucÃ­a</span>
                    <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-6 drop-shadow-lg leading-tight">
                        Descubre Granada<br>de una forma diferente
                    </h1>
                    <p class="text-lg md:text-xl text-white/90 mb-10 font-medium max-w-2xl mx-auto leading-relaxed drop-shadow-md">
                        Vive una experiencia Ãºnica explorando los rincones mÃ¡s bellos de la ciudad acompaÃ±ado de nuestros nobles y amigables burros.
                    </p>
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <a href="{{ path('app_service_index') }}"
                           class="px-9 py-4 bg-[#8B5E3C] hover:bg-[#764f32] text-white font-bold rounded-2xl transition-all duration-300 shadow-lg shadow-amber-900/30 transform hover:-translate-y-0.5 flex items-center gap-2 text-lg">
                            Ver Servicios
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>
                        </a>
                        <a href="{{ path('app_about') }}"
                           class="px-9 py-4 border-2 border-white/40 text-white font-bold rounded-2xl hover:bg-white/10 backdrop-blur-sm transition-all duration-300 text-lg">
                            Sobre Nosotros
                        </a>
                    </div>
                </div>

                <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-20 animate-bounce">
                    <svg class="w-6 h-6 text-white/60" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                </div>
            </div>

            {# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               POR QUÃ‰ ELEGIRNOS
            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
            <div class="max-w-7xl mx-auto px-6 -mt-16 relative z-30 mb-24">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {% set highlights = [
                        { icon: 'ğŸ¾', color: 'emerald', title: 'Bienestar Animal', desc: 'Nuestros burros son familia. Reciben cuidados diarios y solo participan cuando estÃ¡n descansados.' },
                        { icon: 'ğŸŒ¿', color: 'amber', title: 'Turismo Sostenible', desc: 'Sin prisas, sin contaminaciÃ³n. Un ritmo lento que respeta el entorno natural de Granada.' },
                        { icon: 'ğŸ—ºï¸', color: 'sky', title: 'GuÃ­as Locales', desc: 'Granadinos de corazÃ³n que conocen cada rincÃ³n, mirador y leyenda de esta tierra mÃ¡gica.' }
                    ] %}

                    {% for h in highlights %}
                        <div class="bg-white/90 backdrop-blur-xl border border-stone-100 rounded-[2rem] p-8 shadow-[0_15px_40px_rgba(0,0,0,0.06)] hover:shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-300 group text-center">
                            <div class="w-14 h-14 bg-{{ h.color }}-50 rounded-2xl flex items-center justify-center text-2xl mb-5 mx-auto group-hover:scale-110 transition-transform">
                                {{ h.icon }}
                            </div>
                            <h3 class="text-lg font-bold text-[#3E2F28] mb-2">{{ h.title }}</h3>
                            <p class="text-stone-500 text-sm leading-relaxed">{{ h.desc }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="max-w-7xl mx-auto px-6">

                {# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   SOBRE NOSOTROS - Imagen ajustada
                â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
                <section class="mb-28">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                        <div>
                            <span class="text-[#4A90A4] font-bold tracking-widest uppercase text-xs">Nuestra Historia</span>
                            <h2 class="text-3xl md:text-4xl font-bold text-[#3E2F28] mt-3 mb-8 leading-tight">
                                Nacidos del amor por<br>la tierra andaluza
                            </h2>
                            <div class="space-y-5 text-stone-600 text-lg leading-relaxed">
                                <p>
                                    <strong class="text-[#3E2F28]">DonkeyTour</strong> naciÃ³ de un sueÃ±o sencillo: mostrar la belleza de Granada
                                    a travÃ©s de los ojos de quienes mejor la conocen â€” nuestros burros.
                                </p>
                                <p>
                                    Apostamos por el bienestar animal y un turismo lento, rural y sostenible.
                                    Nuestros burros no cargan, acompaÃ±an. Ellos marcan el ritmo pausado que te permite
                                    disfrutar de las vistas, los sonidos y la magia de esta ciudad.
                                </p>
                            </div>
                            <a href="{{ path('app_about') }}"
                               class="inline-flex items-center gap-2 mt-8 px-7 py-3 border-2 border-stone-200 text-[#3E2F28] font-bold rounded-2xl hover:border-[#4A90A4] hover:text-[#4A90A4] hover:bg-[#4A90A4]/5 transition-all duration-300">
                                Conoce nuestra historia
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>
                            </a>
                        </div>

                        <div class="relative">
                            <div class="bg-[#8B5E3C]/5 rounded-[3rem] p-4">
                                {# h-auto y min-h para que se vea la foto completa de los tres #}
                                <img src="{{ asset('img/burroBanner.png') }}"
                                     alt="DonkeyTour Granada"
                                     class="w-full h-auto min-h-[450px] object-cover object-top rounded-[2.5rem] shadow-lg">
                            </div>
                            <div class="absolute -bottom-6 -left-6 bg-white rounded-3xl p-5 shadow-xl border border-stone-100 flex items-center gap-4">
                                <div class="w-12 h-12 bg-[#4A90A4]/10 rounded-xl flex items-center justify-center text-xl">ğŸ´</div>
                                <div>
                                    <p class="text-2xl font-bold text-[#3E2F28]">{{ donkeys|length }}</p>
                                    <p class="text-[10px] text-stone-400 font-bold uppercase tracking-wider">Burros disponibles</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                {# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   CARRUSEL DE BURROS (React)
                â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
                <section class="mb-28">
                    <div id="react-donkey-carousel"></div>
                </section>

                {# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   SERVICIOS
                â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• #}
                <section id="servicios" class="mb-28 scroll-mt-24">
                    <div class="text-center mb-14">
                        <span class="text-[#8B5E3C] font-bold tracking-widest uppercase text-xs">Â¿QuÃ© ofrecemos?</span>
                        <h2 class="text-3xl md:text-4xl font-bold text-[#3E2F28] mt-3">Nuestros Servicios</h2>
                        <p class="text-stone-400 mt-4 max-w-xl mx-auto">Desde rutas histÃ³ricas hasta terapias asistidas â€” elige la experiencia que mÃ¡s conecte contigo.</p>
                    </div>

                    {% if services|length > 0 %}
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {# ... Resto del bucle de servicios (sin cambios) ... #}
                            {% set icons = {'tour': 'ğŸ—ºï¸', 'therapy': 'ğŸ’†', 'despedida': 'ğŸ‰', 'sponsorship': 'ğŸ’š', 'service': 'â­'} %}
                            {% set colors = {'tour': { bg: 'bg-amber-50', text: 'text-amber-600', badge: 'bg-amber-100 text-amber-800' }, 'therapy': { bg: 'bg-emerald-50', text: 'text-emerald-600', badge: 'bg-emerald-100 text-emerald-800' }, 'despedida': { bg: 'bg-purple-50', text: 'text-purple-600', badge: 'bg-purple-100 text-purple-800' }, 'sponsorship': { bg: 'bg-rose-50', text: 'text-rose-600', badge: 'bg-rose-100 text-rose-800' }, 'service': { bg: 'bg-sky-50', text: 'text-sky-600', badge: 'bg-sky-100 text-sky-800' }} %}
                            {% set labels = {'tour': 'Tour', 'therapy': 'Terapia', 'despedida': 'Despedida', 'sponsorship': 'Apadrinamiento', 'service': 'Servicio'} %}

                            {% for service in services %}
                                {% set stype = service.type|default('service') %}
                                {% set icon = icons[stype]|default('â­') %}
                                {% set color = colors[stype]|default(colors['service']) %}
                                {% set label = labels[stype]|default('Servicio') %}

                                <a href="{{ path('app_service_show', { id: service.id }) }}"
                                   class="bg-white rounded-[2rem] p-8 border border-stone-100 shadow-sm hover:shadow-xl transition-all duration-300 group block relative overflow-hidden">
                                    <span class="{{ color.badge }} text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider absolute top-6 right-6">
                                        {{ label }}
                                    </span>
                                    <div class="w-14 h-14 {{ color.bg }} {{ color.text }} rounded-2xl flex items-center justify-center text-2xl mb-6 group-hover:scale-110 transition-transform">
                                        {{ icon }}
                                    </div>
                                    <h3 class="text-xl font-bold text-[#3E2F28] mb-3 pr-20">
                                        {% if stype == 'tour' and service.name is defined %}{{ service.name }}{% else %}{{ label }}{% endif %}
                                    </h3>
                                    <p class="text-stone-500 text-sm leading-relaxed mb-6 line-clamp-3">
                                        {{ service.description|length > 120 ? service.description|slice(0, 120) ~ 'â€¦' : service.description }}
                                    </p>
                                    <div class="flex items-center gap-6 text-xs text-stone-400 font-medium">
                                        <span class="flex items-center gap-1.5"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>{{ service.duration|date('H:i') }}h</span>
                                        {% if not service.isSponsorship() %}
                                            <span class="flex items-center gap-1.5"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>MÃ¡x. {{ service.maxAphor }}</span>
                                        {% endif %}
                                    </div>
                                    <div class="mt-6 pt-5 border-t border-stone-100 flex items-center justify-between">
                                        <span class="text-2xl font-bold text-[#3E2F28]">{{ service.basePrice|number_format(2, ',', '.') }}â‚¬</span>
                                        <span class="text-[#4A90A4] text-sm font-bold group-hover:translate-x-1 transition-transform flex items-center gap-1">Ver detalles <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></span>
                                    </div>
                                </a>
                            {% endfor %}
                        </div>
                    {% endif %}
                </section>

                {# ... Las demÃ¡s secciones se mantienen igual ... #}
                {# NUESTROS BURROS, CÃ“MO FUNCIONA y CTA FINAL se mantienen igual que en tu cÃ³digo original #}
                {# (Omitido aquÃ­ para brevedad, pero en tu archivo final siguen igual) #}

            </div>
        </div>
    {% endif %}
{% endblock %}